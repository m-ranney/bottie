{% extends "base.html" %}

{% block content %}
  <div class="container">
    <h1>Step by Step Guide</h1>
    <form action="{{ url_for('steps_bp.add_task') }}" method="post">
      <label for="task">Enter a task:</label>
      <input type="text" name="task" id="task" required>
      <button type="submit">Add Task</button>
    </form>
    <div id="tasks-container">
      <!-- The tasks and subtasks will be displayed here -->
    </div>
  </div>

{% for task in tasks %}
  <div class="card">
    <div class="card-body">
      <form action="{{ url_for('steps_bp.update_status', task_id=task.id) }}" method="POST">
        <input type="checkbox" name="status" value="1" {% if task.status %}checked{% endif %} onchange="this.form.submit()">
        <label>{{ task.task }}</label>
        <ul>
          {% for subtask in task.subtasks %}
            <li>{{ subtask }}</li>
          {% endfor %}
        </ul>
      </form>
    </div>
  </div>
{% endfor %}

{% endblock %}